let file_frame,image_data;let buttons=document.getElementsByClassName('wp_image_dialog');function renderMediaUploader(input){'use strict';let multiple=input.hasAttribute("multiple");if(file_frame!=undefined&&file_frame!=null){file_frame.open();return}else{file_frame=wp.media.frames.file_frame=wp.media({frame:'select',multiple:multiple,library:{type:'image'},button:{text:input.dataset.mediaButton!==undefined?input.dataset.mediaButton:"Select Image(s)"}});file_frame.on('open',function(){if(input.value!=''&&input.value!=null&&input.value!=undefined){let arr=input.value.split(',');for(let i in arr){let id=parseInt(arr[i]);file_frame.state().get('selection').add(wp.media.attachment(id))}}});file_frame.on('select',function(){let images=file_frame.state().get('selection').models;let imageIds=images.map((value,index)=>value.attributes.id);input.setAttribute('value',imageIds)});file_frame.open()}}Array.from(buttons).forEach(button=>{button.addEventListener('click',function(e){'use strict';e.preventDefault();if(button.dataset.input!==undefined){let input=document.getElementById(button.dataset.input);renderMediaUploader(input)}})})